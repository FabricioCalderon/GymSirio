{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'login.css' %}?v=3">

<div class="login-wrapper">
    <div class="login-box">
        <h2 class="login-title">Login</h2>
        <form method="post" class="login-form">
            {% csrf_token %}
            
            <!-- Usuario -->
            <div class="field">
                <i class="fa fa-user"></i>
                <input type="text" name="uname" placeholder="Username" required>
            </div>

            <!-- Contrase√±a -->
            <div class="field password-field">
                <i class="fa fa-lock"></i>
                <input type="password" name="pwd" placeholder="Password" id="password" required>
                <i class="fa fa-eye toggle-password"></i>
            </div>

            <input type="submit" value="Login">

            <div class="field">
                <center><a href="{% url 'index' %}">Back to Home</a></center>
            </div>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


{% if error == "no" %}
<script>
    Swal.fire({
        title: 'Inicio de sesi√≥n exitoso üéâ',
        text: 'Bienvenido al sistema.',
        icon: 'success',
        confirmButtonColor: '#4CAF50',
        confirmButtonText: 'Continuar'
    }).then(() => {
        window.location.href = "{% url 'home_view' %}";
    });
</script>

{% elif error == "yes" %}
<script>
    Swal.fire({
        title: 'Credenciales inv√°lidas ‚ùå',
        text: 'Verific√° tu usuario y contrase√±a e intent√° nuevamente.',
        icon: 'error',
        confirmButtonColor: '#e53935',
        confirmButtonText: 'Reintentar'
    });
</script>
{% endif %}


<!-- JS para mostrar/ocultar contrase√±a -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.querySelector('.toggle-password');
    const passwordInput = document.getElementById('password');

    toggle.addEventListener('click', () => {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        toggle.classList.toggle('fa-eye-slash'); // cambia el icono
    });
});
</script>

{% endblock %}
